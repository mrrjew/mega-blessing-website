<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mega Blessing Chapel International – Throne of Grace Temple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "JetBrains Mono", monospace;
        color: #e2e8f0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 1.5rem;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        z-index: -2;
        pointer-events: none;
      }

      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1;
        pointer-events: none;
        background:
          radial-gradient(
            circle at top left,
            rgba(249, 115, 22, 0.2) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at bottom right,
            rgba(168, 85, 247, 0.2) 0%,
            transparent 50%
          );
        filter: blur(100px);
      }

      .container {
        width: 100%;
        max-width: 28rem;
        position: relative;
        z-index: 1;
      }

      .card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(64px);
        -webkit-backdrop-filter: blur(64px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem 2.5rem;
        border-radius: 1.5rem;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
        transition: all 0.3s ease;
      }

      .header {
        text-align: center;
        margin-bottom: 2rem;
      }

      h2 {
        font-size: 1.875rem;
        font-weight: 700;
        letter-spacing: -0.02em;
        color: #f2f2f2;
        margin-bottom: 0.75rem;
      }

      .description {
        font-size: 0.875rem;
        color: #a1a5b4;
        line-height: 1.6;
        margin: 0;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      label {
        display: block;
        font-size: 0.875rem;
        font-weight: 600;
        color: #f2f2f2;
        margin-bottom: 0.5rem;
      }

      input,
      select {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid rgba(113, 128, 150, 0.3);
        background: rgba(15, 23, 42, 0.6);
        color: #f2f2f2;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        font-family: inherit;
      }

      select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23f2f2f2' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        padding-right: 2.5rem;
      }

      select option {
        background: #1e293b;
        color: #f2f2f2;
      }

      select option:checked {
        background: linear-gradient(#ea580c, #a855f7);
        color: #f2f2f2;
      }

      input::placeholder,
      select::placeholder {
        color: rgba(226, 232, 240, 0.5);
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #f97316;
        background: rgba(15, 23, 42, 0.8);
        box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
      }

      button {
        width: 100%;
        padding: 0.875rem 1rem;
        margin-top: 0.5rem;
        border-radius: 0.5rem;
        border: none;
        background: linear-gradient(135deg, #ea580c 0%, #a855f7 100%);
        color: #fff;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(234, 88, 12, 0.3);
      }

      button:hover {
        background: linear-gradient(135deg, #dc2626 0%, #9333ea 100%);
        box-shadow: 0 8px 20px rgba(234, 88, 12, 0.4);
        transform: translateY(-2px);
      }

      button:active {
        transform: translateY(0);
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      @media (max-width: 640px) {
        .card {
          padding: 1.5rem 1.25rem;
        }

        h2 {
          font-size: 1.5rem;
        }

        input,
        select {
          padding: 0.7rem 0.875rem;
        }
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition:
          opacity 0.3s ease,
          visibility 0.3s ease;
        backdrop-filter: blur(4px);
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background: rgba(30, 41, 59, 0.95);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 2rem;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        transform: scale(0.9);
        transition: transform 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .modal-overlay.active .modal-content {
        transform: scale(1);
      }

      .modal-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .modal-icon {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        flex-shrink: 0;
      }

      .modal-icon.success {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
      }

      .modal-icon.error {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
      }

      .modal-icon.info {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
      }

      .modal-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #f2f2f2;
        margin: 0;
      }

      .modal-message {
        font-size: 0.95rem;
        color: #cbd5e1;
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .modal-footer {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
      }

      .modal-btn {
        padding: 0.625rem 1.5rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .modal-btn-primary {
        background: linear-gradient(135deg, #ea580c 0%, #a855f7 100%);
        color: white;
      }

      .modal-btn-primary:hover {
        background: linear-gradient(135deg, #dc2626 0%, #9333ea 100%);
        transform: translateY(-1px);
      }

      .modal-btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: #cbd5e1;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .modal-btn-secondary:hover {
        background: rgba(255, 255, 255, 0.15);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="header">
          <h2>Mega Blessing Chapel International</h2>
          <p class="description">
            Welcome to
            <span style="font-weight: 700; color: #fff"
              >Mega Blessing Chapel International</span
            ><br />
            <span
              style="
                display: inline-block;
                margin: 0.5em 0 1em 0;
                padding: 0.4em 1.2em;
                background: linear-gradient(90deg, #a855f7, #ea580c);
                color: #fff;
                border-radius: 1em;
                font-size: 1.1em;
                font-weight: 800;
                letter-spacing: 0.04em;
                box-shadow: 0 2px 8px rgba(168, 85, 247, 0.15);
              "
              >Throne of Grace Temple</span
            ><br />
            Please fill the form below to register your details with the church
            administration.
          </p>
        </div>

        <form id="stepForm" class="form-group">
          <div class="step" id="step-1">
            <input id="full_name" placeholder="Full Name" required />
            <input id="dob" type="date" placeholder="Date of Birth" required />
            <select id="gender" required>
              <option value="">Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
            <input id="place_of_birth" placeholder="Place of Birth" required />
            <input id="hometown" placeholder="Hometown" required />
            <input id="nationality" placeholder="Nationality" required />
            <input id="marital_status" placeholder="Marital Status" required />
            <button type="button" onclick="nextStep()">Next</button>
          </div>
          <div class="step" id="step-2" style="display: none">
            <input id="contact_number" placeholder="Contact Number" required />
            <input
              id="whatsapp_number"
              placeholder="WhatsApp Number"
              required
            />
            <input id="occupation" placeholder="Your Occupation" required />
            <input
              id="place_of_work_school"
              placeholder="Place of Work/School"
              required
            />
            <input
              id="residential_address"
              placeholder="Residential Address"
              required
            />
            <button type="button" onclick="prevStep()">Back</button>
            <button type="button" onclick="nextStep()">Next</button>
          </div>
          <div class="step" id="step-3" style="display: none">
            <input id="mother_name" placeholder="Mother's Name" required />
            <input
              id="mother_condition"
              placeholder="Mother's Condition"
              required
            />
            <input id="father_name" placeholder="Father's Name" required />
            <input
              id="father_condition"
              placeholder="Father's Condition"
              required
            />
            <input id="spouse_name" placeholder="Name of Spouse if Married" />
            <input
              id="number_of_children"
              placeholder="Number of Children if Any"
            />
            <input id="spouse_contact" placeholder="Spouse Contact" />
            <button type="button" onclick="prevStep()">Back</button>
            <button type="button" onclick="nextStep()">Next</button>
          </div>
          <div class="step" id="step-4" style="display: none">
            <input id="next_of_kin" placeholder="Next of Kin" required />
            <input id="next_of_kin_contact" placeholder="Contact" required />
            <input
              id="baptized"
              placeholder="Have you been baptized"
              required
            />
            <input
              id="introduced_by"
              placeholder="Name of Person Who Introduced You to the Church"
              required
            />
            <label for="ministries"
              >The Ministries / Departments of the Church</label
            >
            <select id="ministries" multiple required>
              <option value="Youth Ministry">Youth Ministry</option>
              <option value="Media">Media</option>
              <option value="Ushering">Ushering</option>
              <option value="Choir">Choir</option>
              <option value="Prayer">Prayer</option>
              <option value="Evangelism">Evangelism</option>
            </select>
            <button type="button" onclick="prevStep()">Back</button>
            <button type="submit">Submit</button>
          </div>
        </form>
      </div>
    </div>

    <div id="modal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <div id="modal-icon" class="modal-icon"></div>
          <h3 id="modal-title" class="modal-title"></h3>
        </div>
        <p id="modal-message" class="modal-message"></p>
        <div class="modal-footer">
          <button
            id="modal-close-btn"
            class="modal-btn modal-btn-primary"
            onclick="closeModal()"
          >
            Done
          </button>
        </div>
      </div>
    </div>

    <script>
      // Stepper logic
      let currentStep = 1;
      const totalSteps = 4;

      function showStep(step) {
        for (let i = 1; i <= totalSteps; i++) {
          document.getElementById(`step-${i}`).style.display =
            i === step ? "block" : "none";
        }
        currentStep = step;
      }

      function nextStep() {
        if (currentStep < totalSteps) {
          showStep(currentStep + 1);
        }
      }

      function prevStep() {
        if (currentStep > 1) {
          showStep(currentStep - 1);
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        showStep(1);
        document
          .getElementById("stepForm")
          .addEventListener("submit", handleSubmit);
      });

      function showModal(type, title, message) {
        const modal = document.getElementById("modal");
        const icon = document.getElementById("modal-icon");
        const titleEl = document.getElementById("modal-title");
        const messageEl = document.getElementById("modal-message");

        icon.className = `modal-icon ${type}`;

        if (type === "success") {
          icon.textContent = "✓";
        } else if (type === "error") {
          icon.textContent = "✕";
        } else {
          icon.textContent = "ℹ";
        }

        titleEl.textContent = title;
        messageEl.textContent = message;
        modal.classList.add("active");
      }

      function closeModal() {
        const modal = document.getElementById("modal");
        modal.classList.remove("active");
      }

      async function handleSubmit(e) {
        e.preventDefault();
        // Gather all form data
        const data = {
          "Submission ID": `SUB-${Date.now()}`,
          "Respondent ID": "Member",
          "Submitted at": new Date().toISOString().slice(0, 10),
          "FULL NAME": document.getElementById("full_name").value,
          "DATE OF BIRTH": document.getElementById("dob").value,
          GENDER: document.getElementById("gender").value,
          "PLACE OF BIRTH": document.getElementById("place_of_birth").value,
          HOMETOWN: document.getElementById("hometown").value,
          NATIONALITY: document.getElementById("nationality").value,
          "MARITAL STATUS": document.getElementById("marital_status").value,
          "CONTACT NUMBER": document.getElementById("contact_number").value,
          "WHATSAPP NUMBER": document.getElementById("whatsapp_number").value,
          "YOUR OCCUPATION": document.getElementById("occupation").value,
          "PLACE OF WORK/SCHOOL": document.getElementById(
            "place_of_work_school",
          ).value,
          "RESIDENTIAL ADDRESS": document.getElementById("residential_address")
            .value,
          "MOTHER'S NAME": document.getElementById("mother_name").value,
          "MOTHER'S CONDITION":
            document.getElementById("mother_condition").value,
          "FATHER'S NAME": document.getElementById("father_name").value,
          "FATHER'S CONDITION":
            document.getElementById("father_condition").value,
          "NAME OF SPOUSE IF MARRIED":
            document.getElementById("spouse_name").value,
          "NUMBER OF CHILDREN IF ANY":
            document.getElementById("number_of_children").value,
          "SPOUSE CONTACT": document.getElementById("spouse_contact").value,
          "NEXT OF KIN": document.getElementById("next_of_kin").value,
          CONTACT: document.getElementById("next_of_kin_contact").value,
          "HAVE YOU BEEN BAPTIZED": document.getElementById("baptized").value,
          "NAME OF PERSON WHO INTRODUCED YOU TO THE CHURCH":
            document.getElementById("introduced_by").value,
          "THE MINISTRIES / DEPARTMENTS OF THE CHURCH": Array.from(
            document.getElementById("ministries").selectedOptions,
          ).map((opt) => opt.value),
        };

        try {
          const url = "http://localhost:3001/api/register";
          const response = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });
          if (!response.ok) {
            const err = await response.json();
            showModal(
              "error",
              "Submission Failed",
              err.error || "An error occurred. Please try again.",
            );
            return;
          }
          showModal(
            "success",
            "Submission Successful",
            "Thank you for submitting your details.",
          );
        } catch (err) {
          showModal(
            "error",
            "Submission Failed",
            "An error occurred. Please try again.",
          );
        }
      }
    </script>
  </body>
</html>
